(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(4),i=n.n(s),l=(n(17),n(18),n(8)),c=n(1),o=n.n(c),u=n(5),h=n(6),f=n(9),m=n(7),d=n(10),p=n(2),g="https://cdn.mxpnl.com/static/misc/gutenberg-catalog.txt",v="gutenberg-catalog",w=50;function y(){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(v)){e.next=8;break}return e.next=4,fetch(g);case 4:return e.next=6,e.sent.text();case 6:t=e.sent,localStorage.setItem(v,t);case 8:return e.abrupt("return",t.trim().split("\n").reverse().map(function(e){var t=e.match(/^(.*?)\s+(\d+)$/),n=Object(l.a)(t,3),r=(n[0],n[1]);return{name:r,origName:r,id:n[2]}}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var x=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={articles:[],filteredArticles:[],filterTime:0,resultsCount:0,search:""},n.resultsTimerId=null,n.filterStartTime=new Date(0),n.textInput=r.createRef(),n.filterStartTimer=function(e){n.resultsTimerId||(n.filterStartTime=e)},n.stopTimer=function(){var e=(new Date).getMilliseconds()-n.filterStartTime.getMilliseconds();n.setState({filterTime:e})},n.searchArticles=function(e){if(e.length>3){var t=n.state.articles;return t.forEach(function(e,t){e.name=e.origName}),t.filter(function(t){return-1!==t.name.toLowerCase().indexOf(e.toLowerCase())})}},n.addSearchMatchMarkup=function(e,t){var n=new RegExp(e,"gi");return t.forEach(function(e,t){var r=e.name.match(n);r&&(e.name=e.name.replace(r[0],'<span class="highlight">'.concat(r[0],"</span>")))}),t},n.resetArticleNames=function(){n.state.filteredArticles.forEach(function(e,t){e.name=e.origName})},n.filterResults=function(e){var t=new Date;if(n.filterStartTimer(t),e.length>3){var r=n.searchArticles(e);if(r){var a=n.addSearchMatchMarkup(e,r);a&&n.setState({filteredArticles:a,resultsCount:r.length},function(){n.stopTimer(),n.resultsTimerId=null})}}else n.resetArticleNames(),0===e.length&&(n.stopTimer(),n.resultsTimerId=null),n.setState({filteredArticles:n.state.articles.slice(0,w),resultsCount:0})},n.handleInputUpdate=function(e){n.setState({search:e.target.value}),n.filterResults(e.target.value)},n.handleElementScroll=function(e){if(!n.state.search.length){var t=e.target;t.offsetHeight+t.scrollTop>=t.scrollHeight&&n.setState({filteredArticles:n.state.articles.slice(0,n.state.filteredArticles.length+w)})}},n.handleKeyDown=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;40===e.keyCode?(e.preventDefault(),"INPUT"===e.target.nodeName?n.textInput.current.children[0].focus():"A"===e.target.nodeName&&n.textInput.current.parentElement.children[t+1].children[0].focus()):38===e.keyCode&&(e.preventDefault(),"A"===e.target.nodeName&&(0===t?n.textInput.current.parentElement.parentElement.previousSibling.focus():n.textInput.current.parentElement.children[t-1].children[0].focus()))},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(o.a.mark(function e(){var t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,this.setState({articles:t},function(){n.setState({filteredArticles:n.state.articles.slice(0,w)})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"createMarkup",value:function(e){return{__html:e}}},{key:"render",value:function(){var e=this,t=this.state.filteredArticles;return r.createElement("main",{className:"layout-search"},r.createElement("div",{className:"layout-search-inner"},r.createElement("input",{className:"search",type:"text",placeholder:"Search Gutenberg Catalog",onKeyDown:this.handleKeyDown,onChange:this.handleInputUpdate,value:this.state.search}),r.createElement("div",{className:"results"},!!this.state.resultsCount&&r.createElement("span",{className:"result-count"},"Found ",this.state.resultsCount," results in"," ",1===Math.sign(this.state.filterTime)?this.state.filterTime:0,"ms"),r.createElement("ul",{className:"articles",onScroll:this.handleElementScroll},t.map(function(t,n){return[r.createElement("li",{key:t.id,ref:0===n?e.textInput:null},r.createElement("a",{target:"_blank",rel:"noopener noreferrer",tabIndex:"0","data-index":n,href:(a=t.id,"https://www.gutenberg.org/ebooks/".concat(a)),key:n,dangerouslySetInnerHTML:e.createMarkup(t.name),onKeyDown:function(t){return e.handleKeyDown(t,n)}}))];var a})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.4d0f1525.chunk.js.map